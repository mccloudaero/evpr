
## A summary of the build structure for the absolute newcommer to ESP-IDF:

Firmware for EVPR based on ESP-IDF and ESPNOW

Uses FreeRTOS (as do all ESP-IDF firmware)

ESP-IDF establishes what are known as components. The main folder is a special, hard-coded component that must exist in all ESPIDF projects.

The other components of this project are organized into folders in the components folder. The name of each subfolder of components is the name of the component.

Each component, including main, must contain number of important files. These are described below, but full documentation is available [here](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/build-system.html#id3)

CMakeLists.txt is used by the ESP-IDF compilation toolchain, and defines relevant data for the configuration of the component -- mainly the source files, and the components that the given component references. Notably, the main component does not seem to need to specify requirements, but other components must.

Each component may contain an include folder. Only the contents of this folder are made accessible by the linker to components which require the component. Therefore, hfiles for the component typically live here. Note that the include folder must be specified in the CMakeLists.txt for the component, otherwise it is inert.

Kconfig.projbuild allows the specification of preprossessor directive defines that are accessible to the source code in the component which has them. These settings are then modifiable using idf.py menuconfig.

cmake-build-debug sources are auto-generated during the build process and can be ignored. Ideally, they are excluded by the gitignore file.

There are a couple of relevant files that are at the PROJECT level, not the component level. These are the project-level CMakeLists.txt and sdkconfig.

sdkconfig is autogenerated by menuconfig, and it is what actually makes available the various preprocessor defines that are specified in the Kconfig.projbuild files.

The CMakeLists.txt file in the global scope appears to be boilerplate to keep the internal CMake build system happy. Not sure it really accomplishes much of relevance, though.

The build folder is generated during build process and can be ignored. Ideally, it is excluded by the gitignore.

The remainder of the files not yet described should be the actual component source files. They are, of course, source files!


## A summary of the project structure
This firmware implements three distinct node types: head, rotor, and monitor.

Master receives control data from a flight controller and transmits this data over ESPNOW to rotors. Currently, over UART. Later, maybe, over CAN bus.

Rotors receive control data from ESPNOW and execute on it.

Monitors are not implemented yet, but can passively receive rotor data.

Each node type has its own component implementing behavior that is specific to that component.

However, the communications protocol programming is unified and implemented in a single component: ESPComms, which is used by the other components.

The Main component serves only to load in one of the other components based on the configured node type.
